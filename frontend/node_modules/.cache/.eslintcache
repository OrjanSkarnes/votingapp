[{"/Users/orjanskarnes/Dev/votingapp/frontend/src/index.js":"1","/Users/orjanskarnes/Dev/votingapp/frontend/src/App.js":"2","/Users/orjanskarnes/Dev/votingapp/frontend/src/LoginPage.js":"3","/Users/orjanskarnes/Dev/votingapp/frontend/src/Navigation.js":"4","/Users/orjanskarnes/Dev/votingapp/frontend/src/VotingPage.js":"5","/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/fetchWrapper.js":"6","/Users/orjanskarnes/Dev/votingapp/frontend/src/Dashboard.js":"7","/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/sessionStorage.js":"8","/Users/orjanskarnes/Dev/votingapp/frontend/src/Poll.js":"9","/Users/orjanskarnes/Dev/votingapp/frontend/src/Polls.js":"10","/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/countdown.js":"11","/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/pollService.js":"12","/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/userService.js":"13","/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/voteService.js":"14","/Users/orjanskarnes/Dev/votingapp/frontend/src/Result.js":"15"},{"size":177,"mtime":1698647040064,"results":"16","hashOfConfig":"17"},{"size":1203,"mtime":1698752589846,"results":"18","hashOfConfig":"17"},{"size":2721,"mtime":1698744033220,"results":"19","hashOfConfig":"17"},{"size":694,"mtime":1698600351163,"results":"20","hashOfConfig":"17"},{"size":3401,"mtime":1698741219718,"results":"21","hashOfConfig":"17"},{"size":1193,"mtime":1698678033002,"results":"22","hashOfConfig":"17"},{"size":2268,"mtime":1698756482324,"results":"23","hashOfConfig":"17"},{"size":1695,"mtime":1698742158504,"results":"24","hashOfConfig":"17"},{"size":4331,"mtime":1698750694144,"results":"25","hashOfConfig":"17"},{"size":4203,"mtime":1698760548010,"results":"26","hashOfConfig":"17"},{"size":1797,"mtime":1698760428814,"results":"27","hashOfConfig":"17"},{"size":1160,"mtime":1698752936678,"results":"28","hashOfConfig":"17"},{"size":643,"mtime":1698747167690,"results":"29","hashOfConfig":"17"},{"size":342,"mtime":1698752679473,"results":"30","hashOfConfig":"17"},{"size":2217,"mtime":1698760370237,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},"1iwcvsd",{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"39","messages":"40","suppressedMessages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"35"},{"filePath":"43","messages":"44","suppressedMessages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"46","messages":"47","suppressedMessages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"35"},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"35"},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"63","messages":"64","suppressedMessages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","suppressedMessages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","suppressedMessages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"72","messages":"73","suppressedMessages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"75","messages":"76","suppressedMessages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"78","messages":"79","suppressedMessages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/orjanskarnes/Dev/votingapp/frontend/src/index.js",[],[],["81"],"/Users/orjanskarnes/Dev/votingapp/frontend/src/App.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/LoginPage.js",["82"],[],"import React, { useState } from 'react';\nimport fetchWrapper from './helpers/fetchWrapper';\nimport { useNavigate } from 'react-router-dom';\nimport { sessionStorageService } from './helpers/sessionStorage';\nimport UserService from './helpers/userService';\n\nexport const LoginPage = () => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const navigate = useNavigate();\n\n    const handleSuccess = (data) => {\n        sessionStorageService.login(true);\n        sessionStorageService.setUser(JSON.stringify(data.data));\n        navigate('/')\n        window.location.reload();\n    }\n\n    // Call your Spring REST API to authenticate the user\n    // On success, you can redirect to another page or provide feedback to the user\n    const handleLogin = async () => {\n        setErrorMessage('');\n\n        UserService.login(username, password).then(data => {\n            handleSuccess(data)\n        }).catch((error) => {\n            switch (error?.status) {\n                case 404:\n                    setErrorMessage('User not found')\n                    break;\n                case 401:\n                    setErrorMessage('Invalid password')\n                    break;\n                default:\n                    setErrorMessage('Something went wrong')\n                    break;\n            }\n        });\n    }\n\n    const handleCreateAccount = async () => {\n        setErrorMessage('');\n        UserService.register({username, password}).then(data => {\n            handleSuccess(data)\n        }).catch((error) => {\n            console.error(error.status);\n            if (error?.status === 409) {\n                // Handle 409 error\n                setErrorMessage('User already exists')\n            }\n        });\n    }\n\n    const userNameChange = (e) => {\n        setUsername(e.target.value);\n    }\n\n    const passwordChange = (e) => {\n        setPassword(e.target.value);\n    }\n\n    return (\n        <div className=\"container login-container\">\n            <h1>Login</h1>\n            <div className=\"login-form\">\n                <input type=\"text\" placeholder=\"Username:\" value={username} onChange={userNameChange} />\n                <input type=\"password\" placeholder=\"Password:\" value={password} onChange={passwordChange} />\n                {errorMessage && <p className='error'>{errorMessage}</p>} \n           \n                <div className=\"button-container\">\n                    <button onClick={handleCreateAccount}>Create account</button>\n                    <button onClick={handleLogin}>Log in</button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default LoginPage;\n","/Users/orjanskarnes/Dev/votingapp/frontend/src/Navigation.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/VotingPage.js",["83"],[],"import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate, useNavigation } from 'react-router-dom';\nimport { useCountdown } from './helpers/countdown';\nimport { getUser } from './helpers/sessionStorage';\nimport PollService from './helpers/pollService';\nimport UserService from './helpers/userService';\nimport VoteService from './helpers/voteService';\n\nfunction VotingPage() {\n    const location = useLocation();\n    const navigate = useNavigate();\n    // get id based on the path in the url\n    const pollId = location.pathname.split('/').pop();\n\n    const [poll, setPoll] = useState(null); // The poll data\n    const [vote, setVote] = useState(null); // The poll data\n    const [errorMessage, setErrorMessage] = useState(null); // The poll data\n\n    const timeLeft = useCountdown(poll?.endTime);\n\n\n    useEffect(() => {\n        PollService.getPollById(pollId).then(data => {\n            setPoll(data.data);\n            UserService.getUserById(data.data.creatorId)\n                .then(userRes => setPoll({...data.data, creator: userRes.data}))\n                .catch((error) => {setErrorMessage('Could not find creator of poll')});\n        }).catch((error) => {\n            setErrorMessage('Poll not found')\n        });\n    }, [pollId]);\n\n\n  const handleSubmit = () => {\n    if (vote === null) {\n         alert('Please select an option before submitting.');\n         return;\n    }\n    const reqVote = {\n        choice: vote,\n        userId: getUser()?.id,\n        pollId: poll.id\n    }\n\n    VoteService.createVote(reqVote)\n        .then(data => navigate(`/polls`))\n        .catch((error) => {\n            switch (error?.status) {\n                case 409:\n                    setErrorMessage('You have already voted on this poll')\n                    break;\n                case 404:\n                    setErrorMessage('Poll not found')\n                    break;\n                case 400:\n                    setErrorMessage('You cannot vote on your own poll')\n                    break;\n                case 401:\n                    setErrorMessage('You must be logged in to vote')\n                    break;\n                default:\n                    setErrorMessage('Something went wrong')\n                    break;\n            }\n        });\n    };\n\n    if (!poll) return <div>Loading...</div>;\n\n    return (\n        <div className='container'>\n            <div className=\"vote-header\">\n                <h1>{poll.question}</h1>\n                <p>Description:{poll.description}</p>\n                <p>Created by: {poll.creator?.username}</p>\n                <p>Votes: {poll.voteIds?.length} </p>\n                <span>Time left: {timeLeft}</span>\n            </div>\n            <br></br>\n            <h2>Vote</h2>\n            <div className=\"vote-options\">\n                 <label className=\"vote-option\">\n                    <input type=\"radio\" name=\"vote\" value={true} onChange={() => setVote(true)}/>\n                    For\n                </label>\n                <label className=\"vote-option\">\n                    <input type=\"radio\" name=\"vote\" value={false} onChange={() => setVote(false)}/>\n                    Against\n                </label>\n            </div>\n            <button onClick={handleSubmit}>Submit vote</button>\n            {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n    );\n}\n\nexport default VotingPage;\n","/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/fetchWrapper.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/Dashboard.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/sessionStorage.js",["84"],[],"import { v4 as uuidv4 } from 'uuid';\n\nexport const sessionStorageService = {\n    setItem: (key, value) => {\n        sessionStorage.setItem(key, JSON.stringify(value));\n    },\n    getItem: (key) => {\n        const item = sessionStorage.getItem(key);\n        return !!item ? JSON.parse(item) : null;\n    },\n    removeItem: (key) => {\n        sessionStorage.removeItem(key);\n    },\n    clear: () => {\n        sessionStorage.clear();\n    },\n    login: (isLoggedIn) => {\n        sessionStorage.setItem('user', isLoggedIn);\n    },\n    setUserId: (userId) => {\n        sessionStorage.setItem('userId', userId);\n    },\n    setUser: (user) => {\n        sessionStorage.setItem('user', user);\n        sessionStorageService.setUserId(user.id);\n    },\n};\n\nexport const isUserLoggedIn = () => {\n    return !!sessionStorageService.getItem('user');\n}\n\nexport const getUserId = () => {\n    const user = sessionStorageService.getItem('user');\n    return user?.id;\n}\n\nexport const getUser = () => {\n    const user = sessionStorageService.getItem('user');\n    return user;\n}\n\nexport const logout = () => {\n    sessionStorageService.clear();\n    window.location.reload();\n    window.location.href = '/';\n}\n\nexport const getTempId = () => {\n    const tempId = sessionStorageService.getItem('tempId');\n    if (!tempId) {\n        const newTempId = Date.now();\n        sessionStorageService.setItem('tempId', newTempId);\n    }\n    return tempId;\n}\n\nexport const getUserStatus = () => {\n    const user = getUser();\n    const tempId = sessionStorageService.getItem('tempId');\n    if (user) {\n        return 'loggedIn';\n    } else if (tempId) {\n        return 'anonymous';\n    } else {\n        return 'notLoggedIn';\n    }\n}","/Users/orjanskarnes/Dev/votingapp/frontend/src/Poll.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/Polls.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/countdown.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/pollService.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/userService.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/helpers/voteService.js",[],[],"/Users/orjanskarnes/Dev/votingapp/frontend/src/Result.js",[],[],{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","severity":1,"message":"88","line":2,"column":8,"nodeType":"89","messageId":"90","endLine":2,"endColumn":20},{"ruleId":"87","severity":1,"message":"91","line":2,"column":36,"nodeType":"89","messageId":"90","endLine":2,"endColumn":49},{"ruleId":"87","severity":1,"message":"92","line":1,"column":16,"nodeType":"89","messageId":"90","endLine":1,"endColumn":22},"no-new-object",["93"],"no-unused-vars","'fetchWrapper' is defined but never used.","Identifier","unusedVar","'useNavigation' is defined but never used.","'uuidv4' is defined but never used.","no-object-constructor"]